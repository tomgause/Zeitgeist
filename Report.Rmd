---
title: "Zeitgeist Analysis"
author: "Tom Gause and Liam O'Brien"
date: "May 20, 2022"
header-includes:
- \usepackage{listings}
- \usepackage{amsmath, amsthm, amssymb, amsfonts}
- \usepackage{graphicx}
output: 
- pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

# Introduction    
For the past four years at Middlebury College, a small team of students who write for the Middlebury Campus, the school's student newspaper, have designed a survey called the Zeitgeist. The intent of this survey is to get a basic idea of student behavior and attitude on campus. The survey is totally anonymous, and this lets the Zeitgeist team ask a range of sensitive questions such as "Have you ever broken the Honor Code?", "Have you been a victim of sexual assault?", and "Are you happy"? Each year, this survey, which takes 10-20 minutes to complete, is sent to the entire student body. When the responses are collected, the Middlebury Campus analyzes the data and releases an article summarizing some of the significant results of the survey (note that this article shares statistics only, the Zeitgeist team avoids any opinion writing). The Zeitgeist project is the largest and most comprehensive student census at Middlebury.   
In Spring 2022, the Zeitgeist team released the Zeitgeist 4.0. They collected 1134 responses of 2837 undergraduates--approximately 40% of the student population--and published a  \href{https://www.middleburycampus.com/article/2022/05/zeitgeist-4-0-2022}{summary article} after light data cleaning. For our final project, we chose to answer the following question: are the Zietgeist 4.0 respondents representative of the Middlebury student population?   
Our null hypothesis is: The Zeitgeist is representative of the Middlebury student population. To evaluate this hypothesis, we used 5 TODO IT'S NOT 5 ANYMORE metrics--class year, gender, ethnicity, geographic distribution, and major[s]--and collected data for each of these metrics from the Zeitgeist summary post referenced above. As our ground truth data, we collected data from the college. TODO: LIAM EXPLAIN HOW DATA WAS COLLECTED HERE.  
``` {r raw.data}
Gender <- c("Cisgender Female", "Cisgender Male", "Non-Binary", 
            "I prefer not to answer", "Transgender Male", "Transgender Female",
            "These options don't define me")
vals.Z <- c(652, 401, 63, 10, 13, 5, 21)
# The data from Middlebury only has binary options for "Women" and "Men"
vals.M <- c(1416, 1240, 0, 0, 0, 0, 0)
Gender.Data.Raw <- data.frame(Gender = Gender,
                          Zeitgeist = vals.Z,
                          Middlebury = vals.M)

FinAid <- c("Yes", "No")
vals.Z <- c(485, 639)
# Middlebury data is from Fall 2021, not Spring 2022.
vals.M <- c(1315, 1520)

# Extra row ommitted, 4 "prefer not to answer"
Class.Z <- c(2022, 2022.5, 2023, 2023.5, 2024, 2024.5, 2025, 2025.5, 0)
vals.Z <- c(180, 80, 190, 79, 242, 73, 236, 50, 4)
Class.M <- c(2022,2023,2024,2025)
# Rounded data based on proportions from fall 2021
vals.M <- c(600,690,727,638)
Class.Data.Z <- data.frame(Gender = Class.Z,
                         Zeitgeist = vals.Z)

# We assume that the administration combined feb and reg classes
vals.Z2 <- c(180+80, 190+79, 242+73, 236+50)

Class.Data.Raw <- data.frame(Gender = Class.M,
                             Zeitgeist = vals.Z2,
                             Middlebury = vals.M)

# This data is tricky, because students had the option to check
# all boxes that applied
Race <- c("White", "Asian", "Hispanic or Latino Origin", 
          "Black or African American", "Middle Eastern or North African", 
          "I prefer not to answer", "American Indian or Alaskan Native",
          "Native Hawaiian or other Pacific Islander", "International", 
          "Two or more races", "Race and/or ethnicity unknown")
vals.Z <- c(911, 173, 96, 57, 17, 13, 8, 5, 0, 0, 0)
# "Middle Eastern or North African" and "I prefer not to answer" are not 
# categories in Middlebury's data
# "International", "Two or more races", and "Race and/or ethnicity unknown" 
# are additional categories in Middlebury data

vals.M <- c(1556, 199, 287, 125, 0, 0, 3, 0, 308, 157, 19)
Race.Data.Raw <- data.frame(Race = Race,
                        Zeitgeist = vals.Z,
                        Middlebury = vals.M)

Geography <- c("New England", "Mideast", "Southeast", "Great Lakes", "Plains", 
               "Southwest", "Rocky Mountain", "Far West", 
               "Inernational/Outside the U.S.", "I prefer not to answer")
vals.Z <- c(340, 272, 101, 63, 43, 33, 39, 136, 103, 4)
vals.M <- c(698, 604, 203, 164, 70, 78, 77, 301, 0, 143)
Geography.Data.Raw <- data.frame(Geographic.Location = Geography,
                             Zeitgeist = vals.Z,
                             Middlebury = vals.M)




Majors.Z <- c("Undeclared", "Environmental Studies", "Economics", "Political Science", "Neuroscience", "Computer Science", "English & American Literatures", "Psychology", "International & Global Studies", "Molecular Biology & Biochemistry", "Biology", "Mathematics", "International Politics & Economics", "History", "History of Art & Architecture", "Film & Media Culture", "Geography", "Anthropology", "Physics", "Spanish", "Chemistry", "Sociology", "Theatre", "Education Studies", "Music", "Philosophy", "Chinese", "Geology", "Biochemistry", "Independent Scholar", "Studio Art", "I prefer not to answer", "Arabic", "Gender, Sexuality, & Feminist Studies", "German", "Classics", "Japanese Studies", "Dance", "Russian", "French", "Religion", "American Studies", "Comparative Literature", "Literary Studies", "Black Studies", "History-Science, Medicine, and Technology", "Italian")

vals.Z <- c(162, 125, 113, 70, 68, 88, 60, 58, 50, 38, 35, 48, 44, 35, 33, 30, 25, 24, 25, 23, 22, 24, 17, 17, 15, 14, 13, 11, 10, 10, 7, 12, 12, 12, 12, 6, 5, 5, 5, 4, 4, 3, 3, 3, 2, 0, 0)
Major.Data.Z <- data.frame(Major = Majors.Z,
                         Zeitgeist = vals.Z)
    
                         
Majors.M <- c("Dance","Film & Media Culture","Music",
              "Studio Art","Theatre","Classics","History",
              "History-Science, Medicine, and Technology",
              "Philosophy","Religion", "American Studies","Black Studies",
              "Environmental Studies","Gender, Sexuality, & Feminist Studies",
              "Independent Scholar",
              "International Politics & Economics",
              "International & Global Studies","Neuroscience","Arabic",
              "Chinese",
              "French","German","Italian",
              "Japanese Studies","Russian","Spanish","Comparative Literature",
              "English & American Literatures",
              "Literary Studies","Biochemistry","Biology",  
              "Chemistry","Computer Science","Geology","Mathematics",
              "Molecular Biology & Biochemistry","Physics","Economics",
              "Education Studies","Geography",
              "Political Science","Psychology","Anthropology","Sociology",
              "Undeclared", "I prefer not to answer", 
              "History of Art & Architecture")

vals.M <- c(5,43,19,15,21,9,55,0,24,11,8,3,166,13,6,80,75,152,9,
                20,7,8,3,14,7,21,5,93,7,20,86,29,158,29,68,80,46,298,13,34,
                99,118,41,30,923,0,61)
                
Major.Data.M <- data.frame(Major = Majors.M,
                           Middlebury = vals.M)

Major.Data.Raw <- merge(Major.Data.M, Major.Data.Z, by = "Major", all = TRUE)
```  
  
# Methods    
As we are testing our hypothesis with a large number of variables, we pre-planned the following steps to avoid a false-positive, i.e. avoid p-hacking. First, we decided to only run permutation tests, and we established that a p-value resulting from a hypothesis test must be $<0.03$ to be considered statisticaally significant, lower than the traditional $<0.05$. This reduces the probability of a false positive rejection by $40%$. Next, there is some variation in the features of the Zeitgeist and Middlebury Administration college data. To do analysis, we need to combine or remove some features from both dataset. To avoid bias, these data mutations were made before running our first phase of statistical tests. If the p-values from any of the Phase 1 variable tests came up significant, we would engage in a series of Phase 2 tests where we would alter the data assumptions made about the variables before Phase 1 and re-test against the hypothesis. This process will help ensure any detected significance is not due to falsely made assumptions.  

### Data Modification Pre Phase 1  
##### Gender  
All of the questions in the Zeitgeist included an "I prefer not to answer" option. This option was provided for numerous reasons--some respondents may have felt that the options provided did not apply to them, others may have been concerned that an adversary on the Zeitgeist Team would discover their identity from the provided information and use their data in a malicious manner. For the variables we chose to test, less than $1%$ of respondents selected the "I prefer not to answer" option. For this reason, we have ommited this category from the data for all variables for the initial testing phase.  

After removing the "I prefer not to answer" data, the Financial Aid and Class Year variables matched trivially and were deemed ready for permutation testing.
The Zeitgeist included seven multiple-choice options for gender-identification: Cisgender Female, Cisgender Male, Non-Binary, Transgender Male, Transgender Female, These Options Don't Define Me, and I Prefer Not to Answer. Administration only had two categories: Female, Male. We chose to consider only the following statistics: Cisgender Female (Zeitgeist)::Female (Admin) and Cisgender Male (Zeitgeist)::Male (Admin). This decision was made to uphold statistical rigor and avoid mis-gendering Zeitgeist respondents. We regret that folks who selected genders other than Cisgender Female and Cisgender Male were forced to select Female or Male in their College Applications.  

Total responses for gender: 1280
Total responses to ZG: 1134
146, vs 157 "two or more races" in Midd data

``` {r phase1.data}
library(tidyverse)
library(dplyr)
Gender.Data.Phase1 <- Gender.Data.Raw %>%
  select(Cisgender Female, Cisgender Male)

```  



2) Methods: Describe the methodology you used (i.e., the types of statistical tech-
niques) to answer your research questions. You should describe the data in greater
detail in this section. Any descriptions of estimators to be used, calculations of
bias, details about simulations, etc. belong here. You can also use this section
to be critical of your own sampling scheme. Did things go as planned? Was your
sample really “random,” whatever that means in context?
3) Results: Describe the results of your analyses, simulations, etc. and demonstrate graphs and other output that accompany/enhance these results.
4) Conclusion: Explain how your research question was answered and what possible
meaningful takeaway you/the reader should have.

Thank Yous:

Consult for ethical data modification Sophie Hochman, Joint GSFS Sociology Major.


